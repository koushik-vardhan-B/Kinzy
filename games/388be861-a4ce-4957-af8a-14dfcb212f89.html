<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Safari - Addition Fun!</title>
    <style>
        :root {
            --primary: #4CAF50;
            --secondary: #FF9800;
            --accent: #2196F3;
            --wrong: #f44336;
            --background: #e1f5fe;
            --text: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background);
            color: var(--text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        #game-wrapper {
            background-color: white;
            padding: 2rem;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 500px;
            text-align: center;
            border: 8px solid #fff;
            position: relative;
        }

        h1 {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px #f0f0f0;
        }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: bold;
            font-size: 1.2rem;
            background: #fff9c4;
            padding: 10px 20px;
            border-radius: 50px;
        }

        #question-container {
            font-size: 4rem;
            font-weight: bold;
            margin: 30px 0;
            color: var(--accent);
            animation: bounce 1s infinite alternate;
        }

        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-5px); }
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            background-color: white;
            border: 4px solid var(--accent);
            border-radius: 15px;
            padding: 20px;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--accent);
        }

        .option-btn:hover {
            transform: scale(1.05);
            background-color: #e3f2fd;
        }

        .option-btn.correct {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .option-btn.wrong {
            background-color: var(--wrong);
            color: white;
            border-color: var(--wrong);
            animation: shake 0.5s;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        #feedback {
            height: 40px;
            margin: 20px 0;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .hidden {
            display: none !important;
        }

        #result-screen {
            text-align: center;
        }

        .final-score {
            font-size: 3rem;
            color: var(--secondary);
            margin: 20px 0;
        }

        button#restart-btn {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255,152,0,0.4);
        }

        button#restart-btn:hover {
            background-color: #f57c00;
        }

        .progress-container {
            width: 100%;
            height: 10px;
            background: #eee;
            border-radius: 5px;
            margin-top: 20px;
            overflow: hidden;
        }

        #progress-bar {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s;
        }

        .emoji-float {
            position: absolute;
            font-size: 2rem;
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
        }

        @keyframes floatUp {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-100px); }
        }
    </style>
</head>
<body>

    <div id="game-wrapper">
        <div id="game-screen">
            <h1>Math Safari! ü¶Å</h1>
            <div class="stats-bar">
                <span>Question: <span id="current-q">1</span>/5</span>
                <span>Score: <span id="score">0</span></span>
            </div>

            <div id="question-container">
                <span id="num1">5</span> + <span id="num2">3</span> = ?
            </div>

            <div class="options-grid" id="options">
                <!-- Buttons generated by JS -->
            </div>

            <div id="feedback"></div>

            <div class="progress-container">
                <div id="progress-bar"></div>
            </div>
        </div>

        <div id="result-screen" class="hidden">
            <h1>Great Job! üåü</h1>
            <p>You finished the Math Safari!</p>
            <div class="final-score">Score: <span id="final-score">0</span>/5</div>
            <p id="praise-msg"></p>
            <button id="restart-btn">Play Again! üîÑ</button>
        </div>
    </div>

    <script>
        const gameScreen = document.getElementById('game-screen');
        const resultScreen = document.getElementById('result-screen');
        const optionsContainer = document.getElementById('options');
        const num1Display = document.getElementById('num1');
        const num2Display = document.getElementById('num2');
        const scoreDisplay = document.getElementById('score');
        const currentQDisplay = document.getElementById('current-q');
        const feedbackDisplay = document.getElementById('feedback');
        const progressBar = document.getElementById('progress-bar');
        const finalScoreDisplay = document.getElementById('final-score');
        const praiseMsg = document.getElementById('praise-msg');
        const restartBtn = document.getElementById('restart-btn');

        let score = 0;
        let currentQuestion = 1;
        let correctAnswer = 0;
        let canAnswer = true;
        const totalQuestions = 5;

        function initGame() {
            score = 0;
            currentQuestion = 1;
            canAnswer = true;
            scoreDisplay.innerText = score;
            currentQDisplay.innerText = currentQuestion;
            gameScreen.classList.remove('hidden');
            resultScreen.classList.add('hidden');
            generateQuestion();
            updateProgress();
        }

        function generateQuestion() {
            canAnswer = true;
            feedbackDisplay.innerText = "";
            feedbackDisplay.style.color = "inherit";

            // Generate numbers appropriate for 6-8 year olds (sums up to 20)
            const n1 = Math.floor(Math.random() * 10) + 1;
            const n2 = Math.floor(Math.random() * 10) + 1;
            correctAnswer = n1 + n2;

            num1Display.innerText = n1;
            num2Display.innerText = n2;

            // Generate 4 unique options
            let options = [correctAnswer];
            while (options.length < 4) {
                let wrong = correctAnswer + (Math.floor(Math.random() * 7) - 3);
                if (wrong < 1) wrong = Math.floor(Math.random() * 20) + 1;
                if (!options.includes(wrong)) {
                    options.push(wrong);
                }
            }

            // Shuffle options
            options.sort(() => Math.random() - 0.5);

            optionsContainer.innerHTML = '';
            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt, btn);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selected, btn) {
            if (!canAnswer) return;
            canAnswer = false;

            if (selected === correctAnswer) {
                score++;
                scoreDisplay.innerText = score;
                btn.classList.add('correct');
                feedbackDisplay.innerText = "Correct! Well done! üéâ";
                feedbackDisplay.style.color = "var(--primary)";
                spawnEmoji('‚≠ê');
            } else {
                btn.classList.add('wrong');
                feedbackDisplay.innerText = `Oops! The answer was ${correctAnswer}`;
                feedbackDisplay.style.color = "var(--wrong)";
                spawnEmoji('‚ùå');
                
                // Highlight the correct answer
                Array.from(optionsContainer.children).forEach(b => {
                    if (parseInt(b.innerText) === correctAnswer) {
                        b.classList.add('correct');
                    }
                });
            }

            setTimeout(() => {
                nextQuestion();
            }, 1500);
        }

        function nextQuestion() {
            if (currentQuestion < totalQuestions) {
                currentQuestion++;
                currentQDisplay.innerText = currentQuestion;
                updateProgress();
                generateQuestion();
            } else {
                showResults();
            }
        }

        function updateProgress() {
            const percent = ((currentQuestion - 1) / totalQuestions) * 100;
            progressBar.style.width = percent + '%';
        }

        function showResults() {
            progressBar.style.width = '100%';
            gameScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            finalScoreDisplay.innerText = score;

            if (score === 5) {
                praiseMsg.innerText = "Perfect Score! You're a Math Wizard! üßô‚Äç‚ôÇÔ∏è‚ú®";
            } else if (score >= 3) {
                praiseMsg.innerText = "Great job! You're getting really good at this! üëç";
            } else {
                praiseMsg.innerText = "Keep practicing! You can do it! üí™";
            }
        }

        function spawnEmoji(emoji) {
            const el = document.createElement('div');
            el.className = 'emoji-float';
            el.innerText = emoji;
            el.style.left = Math.random() * 80 + 10 + '%';
            el.style.top = '50%';
            document.getElementById('game-wrapper').appendChild(el);
            setTimeout(() => el.remove(), 1000);
        }

        restartBtn.onclick = initGame;

        // Start the game on load
        initGame();
    </script>
</body>
</html>